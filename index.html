<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ‡å“¥å›¾æ ‡åŠ©æ‰‹</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary-color: #000000;
            --primary-light: #333333;
            --primary-dark: #000000;
            --accent-color: #0066cc;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --divider-color: #d2d2d7;
            --surface-color: #ffffff;
            --background-color: #fbfbfd;
            --success-color: #00b300;
            --error-color: #ff3b30;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes subtle-float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes scale-in {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes blur-in {
            from { backdrop-filter: blur(0); opacity: 0; }
            to { backdrop-filter: blur(20px); opacity: 1; }
        }

        body {
            font-family: "SF Pro Display", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #fbfbfd 0%, #f5f5f7 100%);
            color: var(--text-primary);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        .theme-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 24px;
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header-section {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            z-index: 100;
            padding: 24px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            position: relative;
            height: 80px;
            display: flex;
            align-items: center;
        }

        .title-group {
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .icon-mosaic {
            position: absolute;
            top: -20px;
            left: -20px;
            right: -20px;
            bottom: -20px;
            overflow: hidden;
            opacity: 0.06;
            pointer-events: none;
            z-index: 1;
        }

        .mosaic-icon {
            position: absolute;
            transform-origin: center;
            border-radius: 6px;
        }

        .floating-icons {
            position: absolute;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            display: flex;
            gap: 16px;
            z-index: 1;
        }

        .floating-icon {
            width: 24px;
            height: 24px;
            opacity: 0.2;
            animation: float-icon 3s ease-in-out infinite;
        }

        .floating-icon:nth-child(2n) {
            animation-delay: 0.5s;
        }

        .floating-icon:nth-child(3n) {
            animation-delay: 1s;
        }

        @keyframes float-icon {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-10px) rotate(5deg);
            }
        }

        .brand-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-color), #0077ed);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin-right: 16px;
            position: relative;
            overflow: hidden;
        }

        .brand-icon::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 0%,
                rgba(255,255,255,0.1) 50%,
                transparent 100%
            );
            animation: shine 3s linear infinite;
        }

        @keyframes shine {
            0% {
                transform: rotate(0) translate(-50%, -50%);
            }
            100% {
                transform: rotate(360deg) translate(-50%, -50%);
            }
        }

        .page-title {
            font-size: 28px;
            line-height: 1.1;
            font-weight: 600;
            letter-spacing: -0.015em;
            color: var(--primary-color);
            margin: 0;
        }

        .page-subtitle {
            font-size: 16px;
            line-height: 1.2;
            font-weight: 400;
            color: var(--text-secondary);
            margin: 0;
        }

        .main-content {
            margin-top: 80px;
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        .gradient-blob {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 800px;
            height: 800px;
            background: radial-gradient(
                circle at center,
                rgba(0, 102, 204, 0.05) 0%,
                rgba(255, 255, 255, 0.1) 30%,
                rgba(0, 102, 204, 0.05) 60%,
                rgba(255, 255, 255, 0.1) 100%
            );
            filter: blur(80px);
            opacity: 0.8;
            animation: blob-rotate 20s linear infinite;
            z-index: -1;
            pointer-events: none;
        }

        .gradient-blob::before {
            content: '';
            position: absolute;
            inset: -100px;
            background: radial-gradient(
                circle at center,
                rgba(255, 255, 255, 0.1) 0%,
                rgba(0, 102, 204, 0.05) 40%,
                rgba(255, 255, 255, 0.1) 100%
            );
            animation: blob-rotate-reverse 15s linear infinite;
        }

        @keyframes blob-rotate {
            0% {
                transform: translate(-50%, -50%) rotate(0deg);
            }
            100% {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        @keyframes blob-rotate-reverse {
            0% {
                transform: rotate(360deg);
            }
            100% {
                transform: rotate(0deg);
            }
        }

        .search-section {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.06);
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
        }

        .search-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0) 100%);
            pointer-events: none;
        }

        .theme-input {
            font-size: 18px;
            height: 48px;
            padding: 0 16px;
            border: 1px solid var(--divider-color);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.8);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin: 32px 0;
        }

        .option-group {
            position: relative;
        }

        .option-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 8px;
            letter-spacing: 0.02em;
            text-transform: uppercase;
        }

        .option-select-wrapper {
            position: relative;
            width: 100%;
        }

        .theme-select {
            appearance: none;
            -webkit-appearance: none;
            width: 100%;
            height: 44px;
            padding: 0 36px 0 16px;
            font-size: 15px;
            color: var(--text-primary);
            background: var(--surface-color);
            border: 1px solid var(--divider-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .theme-select:hover {
            background: #f5f5f7;
            border-color: #b6b6b6;
        }

        .theme-select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.15);
        }

        .option-select-wrapper::after {
            content: '';
            position: absolute;
            right: 14px;
            top: 50%;
            width: 8px;
            height: 8px;
            border-right: 2px solid var(--text-secondary);
            border-bottom: 2px solid var(--text-secondary);
            transform: translateY(-70%) rotate(45deg);
            pointer-events: none;
            transition: all 0.2s ease;
        }

        .option-select-wrapper:hover::after {
            border-color: var(--text-primary);
        }

        .theme-select option {
            font-size: 15px;
            padding: 12px;
            background: var(--surface-color);
            color: var(--text-primary);
        }

        .theme-button {
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 17px;
            font-weight: 500;
            color: white;
            background: var(--accent-color);
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 32px;
        }

        .theme-button:hover {
            background: #0077ed;
            transform: translateY(-1px);
        }

        .theme-button:active {
            background: #0055cc;
            transform: translateY(0);
        }

        .theme-button .material-icons {
            font-size: 20px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 40px;
            padding: 0 20px;
        }

        .icon-container {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) backwards;
        }

        .icon-container:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
        }

        .icon-container h3 {
            font-size: 20px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 24px;
            letter-spacing: -0.022em;
        }

        .icon-preview-wrapper {
            background: linear-gradient(135deg, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0.4) 100%);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .icon-preview-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%);
            transform: translateX(-100%);
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .icon-preview-wrapper:hover::before {
            transform: translateX(100%);
        }

        .icon-preview {
            width: 80px;
            height: 80px;
            object-fit: contain;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
            transition: all 0.3s ease;
        }

        .icon-preview:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.15));
        }

        .icon-size-badge {
            position: absolute;
            bottom: 12px;
            right: 12px;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            backdrop-filter: blur(4px);
        }

        .icon-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .icon-button {
            flex: 1;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: -0.01em;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .download-button {
            background: var(--accent-color);
            color: white;
        }

        .preview-button {
            background: rgba(0,0,0,0.05);
            color: var(--text-primary);
        }

        .icon-button:hover {
            transform: translateY(-2px);
        }

        .download-button:hover {
            background: var(--accent-color);
            box-shadow: 0 8px 20px rgba(0,102,204,0.2);
        }

        .preview-button:hover {
            background: rgba(0,0,0,0.08);
        }

        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .no-results svg {
            width: 64px;
            height: 64px;
            margin: 0 auto 24px;
            color: var(--text-secondary);
        }

        .no-results h3 {
            font-size: 24px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 12px;
            letter-spacing: -0.022em;
        }

        .no-results p {
            font-size: 16px;
            color: var(--text-secondary);
            max-width: 400px;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .title-group {
                flex-direction: column;
                gap: 4px;
            }

            .main-content {
                margin-top: 120px;
            }

            .search-section {
                padding: 20px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }
        }

        .features-section {
            margin-top: 80px;
            padding: 60px 0;
            background: linear-gradient(180deg, var(--background-color) 0%, #ffffff 100%);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-top: 40px;
        }

        .feature-card {
            padding: 40px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.06);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 24px;
            color: var(--accent-color);
        }

        .feature-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
            letter-spacing: -0.022em;
        }

        .feature-description {
            font-size: 17px;
            line-height: 1.5;
            color: var(--text-secondary);
        }

        .section-title {
            font-size: 40px;
            font-weight: 600;
            text-align: center;
            color: var(--text-primary);
            margin-bottom: 16px;
            letter-spacing: -0.022em;
        }

        .section-subtitle {
            font-size: 20px;
            text-align: center;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }
    </style>
</head>

<body>
    <header class="header-section">
        <div class="header-content">
            <div class="icon-mosaic" id="iconMosaic">
                <!-- å›¾æ ‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
            <div class="title-group">
                <div class="brand-icon">
                    <span class="material-icons">widgets</span>
                </div>
                    <div>
                    <h1 class="page-title">æ ‡å“¥</h1>
                    <p class="page-subtitle">æ‰¾å›¾æ ‡ï¼Œæ æ çš„</p>
                </div>
            </div>
        </div>
    </header>

    <div class="theme-container">
        <main class="main-content">
            <section class="search-section">
                <div class="gradient-blob"></div>
                <form id="searchForm">
                    <div class="relative">
                        <input type="text" id="url" class="theme-input w-full" 
                            placeholder="è¾“å…¥ç½‘ç«™åç§°æˆ–ç½‘å€ï¼Œä¾‹å¦‚ï¼šæ·˜å®ã€bilibiliã€google.com">
                    </div>
                    <div class="options-grid">
                        <div class="option-group">
                            <label class="option-label">å›¾æ ‡å°ºå¯¸</label>
                            <div class="option-select-wrapper">
                                <select id="size" class="theme-select">
                                    <option value="16">16 Ã— 16 åƒç´ </option>
                                    <option value="32">32 Ã— 32 åƒç´ </option>
                                    <option value="48">48 Ã— 48 åƒç´ </option>
                                    <option value="64" selected>64 Ã— 64 åƒç´ </option>
                                    <option value="128">128 Ã— 128 åƒç´ </option>
                                    <option value="256">256 Ã— 256 åƒç´ </option>
                        </select>
                    </div>
                        </div>
                        <div class="option-group">
                            <label class="option-label">å›¾æ ‡æ ¼å¼</label>
                            <div class="option-select-wrapper">
                                <select id="format" class="theme-select">
                                    <option value="png" selected>PNG â€” æœ€ä½³è´¨é‡ï¼Œæ”¯æŒé€æ˜</option>
                                    <option value="webp">WebP â€” é«˜å‹ç¼©ï¼Œç°ä»£æµè§ˆå™¨</option>
                                    <option value="jpeg">JPEG â€” å…¼å®¹æ€§æœ€å¥½</option>
                        </select>
                    </div>
                </div>
                    </div>
                    <button type="submit" class="theme-button w-full">
                        <span class="material-icons">search</span>
                        å¼€å§‹æœç´¢
                </button>
            </form>
            </section>

            <div id="results" class="results-grid">
            <!-- ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
        </main>

        <section class="features-section">
            <div class="container mx-auto px-6">
                <h2 class="section-title">å¼ºå¤§çš„å›¾æ ‡å¤„ç†èƒ½åŠ›</h2>
                <p class="section-subtitle">æ”¯æŒå¤šç§æ ¼å¼è½¬æ¢ï¼Œå¿«é€Ÿå¤„ç†ï¼Œå®‰å…¨å¯é </p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z" />
                        </svg>
                        <h3 class="feature-title">å…¨é¢çš„æ ¼å¼æ”¯æŒ</h3>
                        <p class="feature-description">æ”¯æŒè¶…è¿‡ 300 ç§ä¸åŒçš„å›¾æ ‡æ ¼å¼ï¼Œæä¾›å¤šç§è½¬æ¢æ–¹å¼ï¼Œå…¨é¢è¶…è¶Šå…¶ä»–å·¥å…·ã€‚æ— è®ºæ˜¯å¸¸è§è¿˜æ˜¯ä¸“ä¸šæ ¼å¼ï¼Œæˆ‘ä»¬éƒ½èƒ½æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚</p>
                    </div>

                    <div class="feature-card">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        <h3 class="feature-title">å¿«é€Ÿç®€ä¾¿</h3>
                        <p class="feature-description">ç®€å•ç›´è§‚çš„æ“ä½œç•Œé¢ï¼Œè¾“å…¥ç½‘å€å³å¯å¿«é€Ÿè·å–å›¾æ ‡ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨å‡ ç§’é’Ÿå†…å®Œæˆæ‰€æœ‰å¤„ç†è¿‡ç¨‹ï¼Œè®©æ‚¨çš„å·¥ä½œæ›´åŠ é«˜æ•ˆã€‚</p>
                    </div>

                    <div class="feature-card">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" />
                        </svg>
                        <h3 class="feature-title">äº‘ç«¯å¤„ç†</h3>
                        <p class="feature-description">æ‰€æœ‰å¤„ç†éƒ½åœ¨äº‘ç«¯è¿›è¡Œï¼Œä¸æ¶ˆè€—æ‚¨çš„è®¡ç®—æœºèµ„æºã€‚å¤šä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ä¿è¯å¤„ç†é€Ÿåº¦ï¼Œè®©æ‚¨éšæ—¶éšåœ°éƒ½èƒ½ä½¿ç”¨ã€‚</p>
                    </div>

                    <div class="feature-card">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                        </svg>
                        <h3 class="feature-title">è‡ªå®šä¹‰è®¾ç½®</h3>
                        <p class="feature-description">æä¾›å¤šç§è‡ªå®šä¹‰é€‰é¡¹ï¼ŒåŒ…æ‹¬å°ºå¯¸è°ƒæ•´ã€æ ¼å¼è½¬æ¢ã€è´¨é‡è®¾ç½®ç­‰ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚ç²¾ç¡®æ§åˆ¶è¾“å‡ºæ•ˆæœã€‚</p>
                    </div>

                    <div class="feature-card">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                        <h3 class="feature-title">å®‰å…¨ä¿éšœ</h3>
                        <p class="feature-description">é‡‡ç”¨å®‰å…¨çš„å¤„ç†æµç¨‹ï¼Œæ‰€æœ‰æ•°æ®ä¼ è¾“å‡ç»è¿‡åŠ å¯†ã€‚æˆ‘ä»¬ä¸ä¼šä¿å­˜æ‚¨çš„ä»»ä½•æ–‡ä»¶ï¼Œç¡®ä¿æ‚¨çš„éšç§å®‰å…¨ã€‚</p>
                    </div>

                    <div class="feature-card">
                        <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        <h3 class="feature-title">å…¨å¹³å°æ”¯æŒ</h3>
                        <p class="feature-description">åŸºäºæµè§ˆå™¨çš„è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒæ‰€æœ‰ä¸»æµå¹³å°å’Œè®¾å¤‡ã€‚æ— éœ€ä¸‹è½½å®‰è£…ä»»ä½•è½¯ä»¶ï¼Œéšæ—¶éšåœ°éƒ½èƒ½ä½¿ç”¨ã€‚</p>
                    </div>
                    </div>
                </div>
        </section>
    </div>

    <canvas id="conversionCanvas" style="display: none;"></canvas>

    <script>
        // åœ¨ç°æœ‰è„šæœ¬çš„å¼€å¤´æ·»åŠ ä»¥ä¸‹ä»£ç 
        const iconUrls = [
            'https://logo.clearbit.com/apple.com',
            'https://logo.clearbit.com/google.com',
            'https://logo.clearbit.com/microsoft.com',
            'https://logo.clearbit.com/amazon.com',
            'https://logo.clearbit.com/facebook.com',
            'https://logo.clearbit.com/netflix.com',
            'https://logo.clearbit.com/spotify.com',
            'https://logo.clearbit.com/twitter.com',
            'https://logo.clearbit.com/linkedin.com',
            'https://logo.clearbit.com/github.com',
            'https://logo.clearbit.com/adobe.com',
            'https://logo.clearbit.com/airbnb.com',
            'https://logo.clearbit.com/alibaba.com',
            'https://logo.clearbit.com/android.com',
            'https://logo.clearbit.com/baidu.com',
            'https://logo.clearbit.com/bing.com',
            'https://logo.clearbit.com/dropbox.com',
            'https://logo.clearbit.com/ebay.com',
            'https://logo.clearbit.com/firefox.com',
            'https://logo.clearbit.com/github.com',
            'https://logo.clearbit.com/instagram.com',
            'https://logo.clearbit.com/intel.com',
            'https://logo.clearbit.com/medium.com',
            'https://logo.clearbit.com/nintendo.com',
            'https://logo.clearbit.com/nvidia.com',
            'https://logo.clearbit.com/paypal.com',
            'https://logo.clearbit.com/pinterest.com',
            'https://logo.clearbit.com/reddit.com',
            'https://logo.clearbit.com/samsung.com',
            'https://logo.clearbit.com/slack.com',
            'https://logo.clearbit.com/snapchat.com',
            'https://logo.clearbit.com/sony.com',
            'https://logo.clearbit.com/steam.com',
            'https://logo.clearbit.com/telegram.org',
            'https://logo.clearbit.com/tencent.com',
            'https://logo.clearbit.com/tesla.com',
            'https://logo.clearbit.com/tiktok.com',
            'https://logo.clearbit.com/twitch.tv',
            'https://logo.clearbit.com/uber.com',
            'https://logo.clearbit.com/unity.com',
            'https://logo.clearbit.com/vimeo.com',
            'https://logo.clearbit.com/visa.com',
            'https://logo.clearbit.com/walmart.com',
            'https://logo.clearbit.com/whatsapp.com',
            'https://logo.clearbit.com/xiaomi.com',
            'https://logo.clearbit.com/yahoo.com',
            'https://logo.clearbit.com/youtube.com',
            'https://logo.clearbit.com/zoom.us'
        ];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createMosaicBackground() {
            const container = document.getElementById('iconMosaic');
            const containerRect = container.getBoundingClientRect();
            
            // æ¸…ç©ºç°æœ‰å†…å®¹
            container.innerHTML = '';
            
            // è®¡ç®—ç½‘æ ¼å¸ƒå±€å‚æ•°
            const gridGap = 20;
            const minIconSize = 16;
            const maxIconSize = 40;
            const columns = Math.ceil(containerRect.width / (maxIconSize + gridGap));
            const rows = Math.ceil(containerRect.height / (maxIconSize + gridGap));
            const totalCells = columns * rows;
            
            // åˆ›å»ºä¸é‡å¤çš„å›¾æ ‡æ•°ç»„
            let availableIcons = [...iconUrls];
            let usedIcons = new Set();
            let currentIcons = [];
            
            // ç¡®ä¿æ¯ä¸ªç›¸é‚»ä½ç½®çš„å›¾æ ‡éƒ½ä¸ç›¸åŒ
            for (let i = 0; i < totalCells; i++) {
                // å¦‚æœå¯ç”¨å›¾æ ‡ç”¨å®Œäº†ï¼Œé‡æ–°å¡«å……ï¼ˆä½†æ’é™¤å·²ç»åœ¨é‚»è¿‘ä½ç½®ä½¿ç”¨çš„å›¾æ ‡ï¼‰
                if (availableIcons.length === 0) {
                    availableIcons = iconUrls.filter(icon => !usedIcons.has(icon));
                    usedIcons.clear();
                }
                
                // è·å–å½“å‰ä½ç½®çš„é‚»è¿‘ä½ç½®
                const row = Math.floor(i / columns);
                const col = i % columns;
                const neighbors = new Set();
                
                // æ£€æŸ¥ä¸Šã€å·¦ã€å³ä½ç½®çš„å›¾æ ‡
                if (row > 0 && currentIcons[(row - 1) * columns + col]) {
                    neighbors.add(currentIcons[(row - 1) * columns + col]);
                }
                if (col > 0 && currentIcons[row * columns + (col - 1)]) {
                    neighbors.add(currentIcons[row * columns + (col - 1)]);
                }
                if (col < columns - 1 && currentIcons[row * columns + (col + 1)]) {
                    neighbors.add(currentIcons[row * columns + (col - 1)]);
                }
                
                // ä»å¯ç”¨å›¾æ ‡ä¸­ç­›é€‰å‡ºä¸åœ¨é‚»è¿‘ä½ç½®çš„å›¾æ ‡
                const validIcons = availableIcons.filter(icon => !neighbors.has(icon));
                
                // å¦‚æœæ²¡æœ‰åˆé€‚çš„å›¾æ ‡ï¼Œä½¿ç”¨ä»»ä½•æœªåœ¨é‚»è¿‘ä½¿ç”¨çš„å›¾æ ‡
                const selectedIcon = validIcons.length > 0 
                    ? validIcons[Math.floor(Math.random() * validIcons.length)]
                    : availableIcons[Math.floor(Math.random() * availableIcons.length)];
                
                // è®°å½•ä½¿ç”¨çš„å›¾æ ‡
                currentIcons.push(selectedIcon);
                usedIcons.add(selectedIcon);
                availableIcons = availableIcons.filter(icon => icon !== selectedIcon);
                
                // åˆ›å»ºå›¾æ ‡å…ƒç´ 
                const img = document.createElement('img');
                img.className = 'mosaic-icon';
                img.src = selectedIcon;
                img.alt = 'icon';
                
                // è®¡ç®—ä½ç½®å’Œå¤§å°
                const size = minIconSize + Math.random() * (maxIconSize - minIconSize);
                const offsetX = Math.random() * gridGap - gridGap / 2;
                const offsetY = Math.random() * gridGap - gridGap / 2;
                
                const left = (col * (maxIconSize + gridGap)) + offsetX;
                const top = (row * (maxIconSize + gridGap)) + offsetY;
                
                img.style.width = `${size}px`;
                img.style.height = `${size}px`;
                img.style.left = `${left}px`;
                img.style.top = `${top}px`;
                
                // æ·»åŠ éšæœºæ—‹è½¬å’ŒåŠ¨ç”»æ•ˆæœ
                const rotation = Math.random() * 60 - 30;
                img.style.transform = `rotate(${rotation}deg)`;
                img.style.opacity = 0.4 + Math.random() * 0.6;
                img.style.animation = `fadeIn 0.5s ease-out ${Math.random() * 0.5}s backwards`;
                
                container.appendChild(img);
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆ›å»ºèƒŒæ™¯
        window.addEventListener('load', createMosaicBackground);

        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°åˆ›å»º
        window.addEventListener('resize', createMosaicBackground);

        // å›¾æ ‡è½¬æ¢å‡½æ•°
        async function convertIcon(imgUrl, format, size) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                const canvas = document.getElementById('conversionCanvas');
                const ctx = canvas.getContext('2d', {
                    alpha: true,
                    imageSmoothingEnabled: true,
                    imageSmoothingQuality: 'high'
                });

                img.crossOrigin = 'anonymous';
                img.onload = () => {
                    // ä½¿ç”¨2å€å¤§å°è¿›è¡Œæ¸²æŸ“ï¼Œç„¶åç¼©å°ï¼Œæé«˜æ¸…æ™°åº¦
                    const scale = 2;
                    canvas.width = size * scale;
                    canvas.height = size * scale;

                    // æ¸…ç©ºç”»å¸ƒå¹¶è®¾ç½®èƒŒæ™¯
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    // å¦‚æœæ˜¯JPEGæ ¼å¼ï¼Œæ·»åŠ ç™½è‰²èƒŒæ™¯
                    if (format.toLowerCase() === 'jpeg') {
                        ctx.fillStyle = '#FFFFFF';
                        ctx.fillRect(0, 0, canvas.width, canvas.height);
                    }
                    
                    // è®¡ç®—ç»˜åˆ¶å°ºå¯¸ï¼Œä¿æŒå®½é«˜æ¯”
                    const drawScale = Math.min(canvas.width / img.width, canvas.height / img.height);
                    const drawWidth = img.width * drawScale;
                    const drawHeight = img.height * drawScale;
                    const x = (canvas.width - drawWidth) / 2;
                    const y = (canvas.height - drawHeight) / 2;

                    // ä½¿ç”¨é«˜è´¨é‡æ’å€¼
                    ctx.imageSmoothingEnabled = true;
                    ctx.imageSmoothingQuality = 'high';

                    // ç»˜åˆ¶å›¾åƒ
                    ctx.drawImage(img, x, y, drawWidth, drawHeight);

                    // åˆ›å»ºä¸´æ—¶ç”»å¸ƒè¿›è¡Œç¼©æ”¾
                    const tempCanvas = document.createElement('canvas');
                    tempCanvas.width = size;
                    tempCanvas.height = size;
                    const tempCtx = tempCanvas.getContext('2d', {
                        alpha: true,
                        imageSmoothingEnabled: true,
                        imageSmoothingQuality: 'high'
                    });

                    // å°†å¤§å°ºå¯¸å›¾åƒç¼©å°åˆ°ç›®æ ‡å°ºå¯¸
                    tempCtx.drawImage(canvas, 0, 0, canvas.width, canvas.height, 0, 0, size, size);

                    try {
                        let mimeType;
                        let quality = 1.0;
                        switch (format.toLowerCase()) {
                            case 'webp':
                                if (!tempCanvas.toDataURL('image/webp').startsWith('data:image/webp')) {
                                    // å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒWebPï¼Œå›é€€åˆ°PNG
                                mimeType = 'image/png';
                                    format = 'png';
                                } else {
                                    mimeType = 'image/webp';
                                    quality = 0.9;
                                }
                                break;
                            case 'jpeg':
                                mimeType = 'image/jpeg';
                                quality = 0.95;
                                break;
                            default:
                                mimeType = 'image/png';
                                format = 'png';
                        }
                        const dataUrl = tempCanvas.toDataURL(mimeType, quality);
                        resolve({dataUrl, format}); // è¿”å›è½¬æ¢åçš„æ ¼å¼ä¿¡æ¯
                    } catch (error) {
                        // å¦‚æœè½¬æ¢å¤±è´¥ï¼Œå›é€€åˆ°PNG
                        const dataUrl = tempCanvas.toDataURL('image/png');
                        resolve({dataUrl, format: 'png'});
                    }
                };

                img.onerror = () => {
                    reject(new Error('Failed to load image'));
                };

                img.src = imgUrl;
            });
        }

        // æ›´æ–°ç¿»è¯‘å‡½æ•°ï¼Œä½¿ç”¨å…è´¹çš„åœ¨çº¿æœåŠ¡
        async function translateToEnglish(chinese) {
            const translationServices = [
                // DeepLå…è´¹ç¿»è¯‘
                {
                    url: 'https://api-free.deepl.com/v2/translate',
                    handler: async (text) => {
                        try {
                            const response = await fetch(`https://lingva.ml/api/v1/zh/en/${encodeURIComponent(text)}`);
                            const data = await response.json();
                            return data.translation?.toLowerCase();
                        } catch (error) {
                            console.error('DeepL translation error:', error);
                            return null;
                        }
                    }
                },
                // LibreTranslate
                {
                    url: 'https://libretranslate.de/translate',
                    handler: async (text) => {
                        try {
                            const response = await fetch(url, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({
                                    q: text,
                                    source: 'zh',
                                    target: 'en'
                                })
                            });
                            const data = await response.json();
                            return data.translatedText?.toLowerCase();
                        } catch (error) {
                            console.error('LibreTranslate error:', error);
                            return null;
                        }
                    }
                },
                // Lingva Translate
                {
                    url: 'https://lingva.ml',
                    handler: async (text) => {
                        try {
                            const response = await fetch(`https://lingva.ml/api/v1/zh/en/${encodeURIComponent(text)}`);
                            const data = await response.json();
                            return data.translation?.toLowerCase();
                        } catch (error) {
                            console.error('Lingva translation error:', error);
                            return null;
                        }
                    }
                }
            ];

            // æ·»åŠ æœ¬åœ°ç¼“å­˜
            const cacheKey = `translation_${chinese}`;
            const cached = localStorage.getItem(cacheKey);
            if (cached) {
                return cached;
            }

            // å°è¯•æ‰€æœ‰ç¿»è¯‘æœåŠ¡
            for (const service of translationServices) {
                try {
                    const result = await service.handler(chinese);
                    if (result) {
                        // æ¸…ç†ç¿»è¯‘ç»“æœ
                        const cleanResult = result.replace(/\s+/g, '')
                            .replace(/[^a-z0-9]/g, '')
                            .toLowerCase();
                        
                        // ç¼“å­˜ç»“æœ
                        localStorage.setItem(cacheKey, cleanResult);
                        return cleanResult;
                    }
                } catch (error) {
                    console.error('Translation service error:', error);
                    continue;
                }
            }

            // å¦‚æœæ‰€æœ‰æœåŠ¡éƒ½å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨æ‹¼éŸ³
            return getPinyin(chinese);
        }

        // æ›´æ–°æ‹¼éŸ³è½¬æ¢å‡½æ•°ï¼Œä½¿ç”¨å…è´¹çš„åœ¨çº¿æœåŠ¡
        async function getPinyin(chinese) {
            const pinyinServices = [
                // PinYin API
                {
                    url: 'https://gist.githubusercontent.com/lxneng/1031058/raw/98ab0f2fedf574ae40b69650eb797ed879aed5f8/pinyin.py',
                    handler: async (text) => {
                        try {
                            const response = await fetch(`https://api.pinyin.dev/v1/pinyin?text=${encodeURIComponent(text)}`);
                            const data = await response.json();
                            return data.pinyin?.join('')?.toLowerCase();
                        } catch (error) {
                            console.error('Pinyin API error:', error);
                            return null;
                        }
                    }
                },
                // Chinese to Pinyin converter
                {
                    url: 'https://www.chineseconverter.com/api/convert/chinese-to-pinyin',
                    handler: async (text) => {
                        try {
                            const response = await fetch(`https://www.chineseconverter.com/api/convert/chinese-to-pinyin?text=${encodeURIComponent(text)}`);
                            const data = await response.json();
                            return data.pinyin?.toLowerCase().replace(/\s+/g, '');
                        } catch (error) {
                            console.error('Chinese converter error:', error);
                            return null;
                        }
                    }
                }
            ];

            // æ·»åŠ æœ¬åœ°ç¼“å­˜
            const cacheKey = `pinyin_${chinese}`;
            const cached = localStorage.getItem(cacheKey);
            if (cached) {
                return cached;
            }

            // å°è¯•æ‰€æœ‰æ‹¼éŸ³æœåŠ¡
            for (const service of pinyinServices) {
                try {
                    const result = await service.handler(chinese);
                    if (result) {
                        // ç¼“å­˜ç»“æœ
                        localStorage.setItem(cacheKey, result);
                        return result;
                    }
                } catch (error) {
                    console.error('Pinyin service error:', error);
                    continue;
                }
            }

            // å¦‚æœæ‰€æœ‰æœåŠ¡éƒ½å¤±è´¥ï¼Œè¿”å›null
            return null;
        }

        // æ›´æ–°å¸¸ç”¨è¯åŒ¹é…ç³»ç»Ÿï¼Œæ·»åŠ æ›´å¤šå›½å†…ç½‘ç«™
        const commonTerms = {
            // æ–°é—»èµ„è®¯
            'ä»Šæ—¥å¤´æ¡': 'toutiao.com',
            'å¤´æ¡': 'toutiao.com',
            'ç½‘æ˜“': '163.com',
            'æ–°æµª': 'sina.com.cn',
            'æœç‹': 'sohu.com',
            'å‡¤å‡°ç½‘': 'ifeng.com',
            'è…¾è®¯ç½‘': 'qq.com',
            'æ¾æ¹ƒ': 'thepaper.cn',
            
            // ç¤¾äº¤åª’ä½“
            'å¾®ä¿¡': 'weixin.qq.com',
            'å¾®åš': 'weibo.com',
            'çŸ¥ä¹': 'zhihu.com',
            'è±†ç“£': 'douban.com',
            'æŠ–éŸ³': 'douyin.com',
            'å¿«æ‰‹': 'kuaishou.com',
            'å°çº¢ä¹¦': 'xiaohongshu.com',
            
            // è§†é¢‘ç½‘ç«™
            'å“”å“©å“”å“©': 'bilibili.com',
            'bç«™': 'bilibili.com',
            'ä¼˜é…·': 'youku.com',
            'çˆ±å¥‡è‰º': 'iqiyi.com',
            'è…¾è®¯è§†é¢‘': 'v.qq.com',
            'èŠ’æœtv': 'mgtv.com',
            
            // è´­ç‰©å¹³å°
            'æ·˜å®': 'taobao.com',
            'å¤©çŒ«': 'tmall.com',
            'äº¬ä¸œ': 'jd.com',
            'æ‹¼å¤šå¤š': 'pinduoduo.com',
            'è‹å®': 'suning.com',
            'å”¯å“ä¼š': 'vip.com',
            'å½“å½“': 'dangdang.com',
            
            // ç”Ÿæ´»æœåŠ¡
            'ç¾å›¢': 'meituan.com',
            'é¥¿äº†ä¹ˆ': 'ele.me',
            'å¤§ä¼—ç‚¹è¯„': 'dianping.com',
            'æºç¨‹': 'ctrip.com',
            'é£çŒª': 'fliggy.com',
            'æ»´æ»´': 'didichuxing.com',
            
            // æ•™è‚²å­¦ä¹ 
            'ç™¾åº¦': 'baidu.com',
            'ç™¾åº¦ç¿»è¯‘': 'fanyi.baidu.com',
            'æœ‰é“': 'youdao.com',
            'ç½‘æ˜“äº‘è¯¾å ‚': 'study.163.com',
            'æ…•è¯¾ç½‘': 'imooc.com',
            
            // å›½é™…ç½‘ç«™
            'å¥ˆé£': 'netflix.com',
            'ç½‘é£': 'netflix.com',
            'æ²¹ç®¡': 'youtube.com',
            'æ¨ç‰¹': 'twitter.com',
            'è„¸ä¹¦': 'facebook.com',
            'é¢†è‹±': 'linkedin.com',
            'ç”µæŠ¥': 'telegram.org',
            'ins': 'instagram.com',
            
            // å¸¸ç”¨ç¼©å†™
            'è°·æ­Œ': 'google.com',
            'å¾®è½¯': 'microsoft.com',
            'äºšé©¬é€Š': 'amazon.com',
            'è‹¹æœ': 'apple.com',
            
            // å¸¸è§ç»„åˆè¯
            'è°·æ­Œåœ°å›¾': 'maps.google.com',
            'è°·æ­Œç¿»è¯‘': 'translate.google.com',
            'è°·æ­Œæœç´¢': 'google.com',
            'å¾®è½¯äº‘': 'azure.com',
            'äºšé©¬é€Šäº‘': 'aws.amazon.com',
            
            // å¸¸è§åç¼€åŒ¹é…
            'å®˜ç½‘': '.com',
            'å•†åŸ': '.com',
            'ç½‘ç«™': '.com',
            'ä¸»é¡µ': '.com'
        };

        // æ·»åŠ æ¨¡ç³ŠåŒ¹é…å‡½æ•°
        function fuzzyMatch(input) {
            // ç§»é™¤å¸¸è§åç¼€
            const cleanInput = input.replace(/(å®˜ç½‘|å•†åŸ|ç½‘ç«™|ä¸»é¡µ)$/, '');
            
            // ç²¾ç¡®åŒ¹é…
            if (commonTerms[cleanInput]) {
                return commonTerms[cleanInput];
            }
            
            // æ¨¡ç³ŠåŒ¹é…
            for (const [key, value] of Object.entries(commonTerms)) {
                if (cleanInput.includes(key)) {
                    return value;
                }
            }
            
            return null;
        }

        // æ›´æ–°åŸŸåå¤„ç†å‡½æ•°
        async function processDomain(input) {
            // ç§»é™¤åè®®å‰ç¼€å’Œç©ºæ ¼
            let domain = input.replace(/^https?:\/\//, '').trim();
            
            try {
                // å¦‚æœè¾“å…¥çš„å·²ç»æ˜¯å®Œæ•´åŸŸåï¼Œç›´æ¥è¿”å›
                if (domain.includes('.')) {
                    return domain.split('/')[0];
                }
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯IPåœ°å€
                if (/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(domain)) {
                    return domain;
                }
                
                // æ£€æŸ¥å¸¸ç”¨è¯åŒ¹é…
                const fuzzyResult = fuzzyMatch(domain);
                if (fuzzyResult) {
                    return fuzzyResult;
                }
                
                // å¦‚æœåŒ…å«ä¸­æ–‡ï¼Œå°è¯•è½¬æ¢
                if (/[\u4e00-\u9fa5]/.test(domain)) {
                    // é¦–å…ˆå°è¯•ç¿»è¯‘
                    const englishName = await translateToEnglish(domain);
                    if (englishName) {
                        return englishName + '.com';
                    }
                    
                    // å¦‚æœç¿»è¯‘å¤±è´¥ï¼Œå°è¯•è½¬æ‹¼éŸ³
                    const pinyin = await getPinyin(domain);
                    if (pinyin) {
                        return pinyin + '.com';
                    }
                    
                    // å¦‚æœéƒ½å¤±è´¥äº†ï¼Œè¿”å›é»˜è®¤æœç´¢å¼•æ“
                    return 'baidu.com';
                }
                
                // éä¸­æ–‡è¾“å…¥ï¼Œæ·»åŠ .comåç¼€
                return domain.toLowerCase() + '.com';
            } catch (error) {
                console.error('Error in domain processing:', error);
                // å¦‚æœå¤„ç†å¤±è´¥ï¼Œä½¿ç”¨åŸºæœ¬å¤„ç†
                if (domain.includes('.')) {
                    return domain.split('/')[0];
                }
                return domain.toLowerCase() + '.com';
            }
        }

        document.getElementById('searchForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const url = document.getElementById('url').value.trim();
            const format = document.getElementById('format').value;
            const size = document.getElementById('size').value;
            const resultsDiv = document.getElementById('results');

            // æ›´æ–°åŠ è½½æ˜¾ç¤º
            resultsDiv.innerHTML = `
                <div class="col-span-full">
                    <div class="loading-container">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">æ­£åœ¨æœç´¢å›¾æ ‡</div>
                        <div class="loading-steps">
                            <div class="loading-step active">
                                <div class="loading-step-icon">ğŸ”</div>
                                <span>æ­£åœ¨è§£æåŸŸå...</span>
                        </div>
                            <div class="loading-step">
                                <div class="loading-step-icon">ğŸŒ</div>
                                <span>æ­£åœ¨æœç´¢å›¾æ ‡æ¥æº...</span>
                            </div>
                            <div class="loading-step">
                                <div class="loading-step-icon">âš¡</div>
                                <span>æ­£åœ¨è·å–é«˜æ¸…å›¾æ ‡...</span>
                            </div>
                            <div class="loading-step">
                                <div class="loading-step-icon">âœ¨</div>
                                <span>æ­£åœ¨ä¼˜åŒ–å›¾æ ‡è´¨é‡...</span>
                            </div>
                        </div>
                        <div class="loading-progress">
                            <div class="loading-progress-bar"></div>
                        </div>
                    </div>
                </div>
            `;

            try {
                // æ·»åŠ åŠ è½½æ­¥éª¤æ›´æ–°å‡½æ•°
                function updateLoadingStep(step) {
                    const steps = document.querySelectorAll('.loading-step');
                    steps.forEach((s, index) => {
                        if (index === step) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                }

                updateLoadingStep(0); // è§£æåŸŸå
                const processedUrl = await processDomain(url);
                
                updateLoadingStep(1); // æœç´¢å›¾æ ‡
                const services = [
                    {
                        name: 'Clearbit Logo (HD)',
                        url: (domain) => `https://logo.clearbit.com/${domain}?size=512`
                    },
                    {
                        name: 'Favicon Kit',
                        url: (domain) => `https://api.faviconkit.com/${domain}/144`
                    },
                    {
                        name: 'Google Favicon (HD)',
                        url: (domain) => `https://www.google.com/s2/favicons?domain=${domain}&sz=256`
                    },
                    {
                        name: 'Favicon Grabber',
                        url: (domain) => `https://favicongrabber.com/api/grab/${domain}`
                    },
                    {
                        name: 'DuckDuckGo Icon',
                        url: (domain) => `https://icons.duckduckgo.com/ip3/${domain}.ico`
                    },
                    {
                        name: 'Yandex Icon',
                        url: (domain) => `https://favicon.yandex.net/favicon/${domain}`
                    },
                    {
                        name: 'CN Icon Service',
                        url: (domain) => `https://favicon.cccyun.cc/${domain}`
                    },
                    {
                        name: 'QQ Favicon',
                        url: (domain) => `https://api.iowen.cn/favicon/${domain}.png`
                    }
                ];

                // æ¸…ç©ºç»“æœåŒºåŸŸ
                resultsDiv.innerHTML = '';

                // æ›´æ–°å›¾ç‰‡åŠ è½½å‡½æ•°ï¼Œä¼˜åŒ–å¯¹å›½å†…ç½‘ç«™çš„æ”¯æŒ
                async function loadImage(url) {
                    const MAX_RETRIES = 2;
                    let retries = 0;

                    while (retries <= MAX_RETRIES) {
                        try {
                            const controller = new AbortController();
                            const timeoutId = setTimeout(() => controller.abort(), 8000);

                            // ä½¿ç”¨æ›´å¤šçš„ä»£ç†æœåŠ¡
                            const proxyUrls = [
                                url,
                                `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
                                `https://corsproxy.io/?${encodeURIComponent(url)}`,
                                `https://cors-anywhere.herokuapp.com/${url}`,
                                `https://cors.luckydesigner.workers.dev/?${encodeURIComponent(url)}`,
                                `https://bird.ioliu.cn/v1/?url=${encodeURIComponent(url)}`
                            ];

                            let lastError;
                            for (const proxyUrl of proxyUrls) {
                                try {
                                    const response = await fetch(proxyUrl, {
                                        signal: controller.signal,
                                        mode: 'cors',
                                        headers: {
                                            'Accept': 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*',
                                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                                        }
                                    });

                                    if (!response.ok) continue;

                                    const blob = await response.blob();
                                    if (blob.size < 20) continue;

                                    clearTimeout(timeoutId);
                                    return URL.createObjectURL(blob);
                    } catch (error) {
                                    lastError = error;
                        continue;
                    }
                }

                            throw lastError || new Error('All proxy attempts failed');
                        } catch (error) {
                            retries++;
                            if (retries > MAX_RETRIES) {
                                console.error(`Failed to load image after ${MAX_RETRIES} retries:`, url, error);
                                throw error;
                            }
                            await new Promise(resolve => setTimeout(resolve, 1500 * retries));
                        }
                    }
                }

                // æ›´æ–°å›¾ç‰‡éªŒè¯å‡½æ•°ï¼Œå¢åŠ æ›´å¤šå®¹é”™
                async function validateImage(dataUrl) {
                    return new Promise((resolve, reject) => {
                        const img = new Image();
                        const timeout = setTimeout(() => {
                            reject(new Error('Image load timeout'));
                        }, 5000);

                        img.onload = () => {
                            clearTimeout(timeout);
                            // æ›´å®½æ¾çš„å°ºå¯¸éªŒè¯
                            if (img.width < 4 || img.height < 4) {
                                reject(new Error('Invalid image dimensions'));
                            } else {
                                resolve(true);
                            }
                        };

                        img.onerror = () => {
                            clearTimeout(timeout);
                            reject(new Error('Failed to load image'));
                        };

                        img.src = dataUrl;
                    });
                }

                updateLoadingStep(2); // è·å–é«˜æ¸…å›¾æ ‡
                const loadPromises = services.map(async service => {
                    const iconContainer = document.createElement('div');
                    iconContainer.className = 'icon-container bg-white p-4 rounded-lg shadow-sm hover:shadow-md';

                    // ä½¿ç”¨æ–°çš„åŠ è½½åŠ¨ç”»æ ·å¼
                    iconContainer.innerHTML = `
                        <h3 class="text-lg font-semibold mb-3">${service.name}</h3>
                        <div class="flex flex-col items-center space-y-3">
                            <div class="relative">
                                <div class="icon-preview-wrapper">
                                    <div class="loading-spinner" style="width: 30px; height: 30px; border-width: 3px;"></div>
                                </div>
                            </div>
                        </div>
                    `;

                    resultsDiv.appendChild(iconContainer);

                    try {
                        const serviceUrl = service.url(processedUrl);
                        console.log('Trying to load:', serviceUrl);
                        const imageUrl = await loadImage(serviceUrl);
                        const {dataUrl: convertedDataUrl, format: actualFormat} = await convertIcon(imageUrl, format, parseInt(size));

                        await validateImage(convertedDataUrl);

                        // æ›´æ–°ä¸‹è½½æŒ‰é’®æ–‡æœ¬ä»¥åæ˜ å®é™…æ ¼å¼
                        const formatDisplay = actualFormat.toUpperCase();
                        const downloadText = actualFormat !== format ? 
                            `ä¸‹è½½${formatDisplay}å›¾æ ‡ (æ ¼å¼è‡ªåŠ¨è½¬æ¢)` : 
                            `ä¸‹è½½${formatDisplay}å›¾æ ‡`;

                        iconContainer.innerHTML = `
                            <h3>${service.name}</h3>
                            <div class="icon-preview-wrapper">
                                <img src="${convertedDataUrl}" 
                                     alt="${service.name} icon" 
                                     class="icon-preview"
                                     onerror="this.onerror=null; this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2264%22 height=%2264%22><rect width=%2264%22 height=%2264%22 fill=%22%23f0f0f0%22/><text x=%2232%22 y=%2232%22 text-anchor=%22middle%22 dominant-baseline=%22middle%22>No icon</text></svg>';">
                                <span class="icon-size-badge">${size}x${size}</span>
                            </div>
                            <div class="icon-actions">
                                <a href="${convertedDataUrl}" 
                                   download="icon_${processedUrl}_${size}x${size}.${actualFormat}"
                                   class="icon-button download-button">
                                   <span class="material-icons" style="font-size: 18px;">download</span>
                                   ${downloadText}
                                </a>
                                <a href="${serviceUrl}" 
                                   target="_blank"
                                   class="icon-button preview-button">
                                   <span class="material-icons" style="font-size: 18px;">open_in_new</span>
                                   åŸå›¾
                                </a>
                            </div>
                        `;

                        URL.revokeObjectURL(imageUrl);
                    } catch (error) {
                        console.error(`Error loading icon from ${service.name}:`, error);
                        iconContainer.remove();
                    }
                });

                await Promise.allSettled(loadPromises);

                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•å›¾æ ‡ï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
                if (resultsDiv.children.length === 0) {
                    resultsDiv.innerHTML = `
                        <div class="no-results">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                            <h3>æœªæ‰¾åˆ°ç›¸å…³å›¾æ ‡</h3>
                            <p>è¯·å°è¯•ä½¿ç”¨å…¶ä»–å…³é”®è¯æˆ–ç½‘å€é‡æ–°æœç´¢</p>
                        </div>
                    `;
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="col-span-full text-center p-8">
                        <div class="text-red-500">
                            <svg class="mx-auto h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <p class="mt-4 text-lg">æœç´¢å‡ºé”™</p>
                            <p class="mt-2 text-sm">${error.message}</p>
                        </div>
                    </div>
                `;
            }
        });
    </script>
</body>

</html>
